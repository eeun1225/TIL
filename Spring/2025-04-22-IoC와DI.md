# 📚 IoC와 DI (2025.04.22)
___

## 🌟 오늘 배운 내용
 - 라이브러리와 프레임워크의 차이
 - 스프링 컨테이너와 Bean의 개념
 - IoC(Inversion of Control)
 - DI(Dependency Injection)

<br/>


## 🔎 요약 정리

___

✅ 라이브러리 vs 프레임워크
- 라이브러리 : 특정 기능을 미리 구현한 소스 집합
- 프레임워크 : 프로그램이 동작하는 기본 뼈대를 제공


✅ Bean
- 스프링이 관리하는 자바 객체
  - 스프링에서 객체를 Bean이라 부른다.
      - new 연산자로 생성한 객체는 빈이 아니다.

- Bean 컨테이너란?
  - 프로그램이 실행될 때 객체가 생성되는 곳


✅ 스프링 컨테이너
- 스프링의 핵심 컴포넌트
  - 객체의 생명 주기 관리, 생성된 객체에게 추가 기능 제공

- BeanFactory와 ApplicationContext 인터페이스 제공
  - BeanFactory
      - 스프링 컨테이너의 최상위 인터페이스
      - 빈 등록 생성, 조회 등의 빈을 관리하는 역할
      - getBean() 메서드를 통해 인스턴스화할 수 있다
  - ApplicationContext
      - BeanFactory의 하위 인터페이스
      - BeanFactory와 부가 기능을 가진다
      - 보통 BeanFactory 보다는 ApplicationContext을 사용함


✅ IoC (Inversion of Control)

- 제어의 역전
  - 메소드나 객체의 호출 작업을 개발자가 결정하는 것이 아니라 외부에서 결정되는 것을 말한다.
  - 객체의 의존성을 역전시켜 객체 간의 결합도를 줄이고 유연한 코드를 작성할 수 있게 해준다.
      - 가독성, 코드 중복 및 유지 보수를 편하게 할 수 있다.
    
  - IoC는 프레임워크가 객체의 생성, 관리, 제어 흐름을 담당하도록 변경하는 개념이라 생각하면 된다.
  
      → Spring은 이를 지원하기 위해 **ApplicationContext**라는 컨테이너를 제공

  - ApplicationContext는 애플리케이션의 컴포넌트를 생성하고 조립하며, 객체의 라이프사이클을 관리한다.


- IoC 순서

  1. ApplicationContext를 사용하여 빈을 생성하고 관리한다.
      - 빈은 일반적으로 Spring이 제어하므로 개발자는 객체의 생성과 관리를 직접 처리하지 않는다.
  2. 의존성 관리
      - 객체 간의 의존성을 Spring이 주입한다.
      - 객체가 필요로 하는 다른 객체를 직접 생성하거나 찾는 대신, Spring 컨테이너가 의존성을 주입해주다.
  3. 제어 흐름의 역전
      - 개발자가 코드의 제어 흐름을 결정하지 않고, 프레임워크가 객체의 라이프사이클 및 실행 흐름을 관리한다.

     
✅ DI (Dependency Injection)

- 의존성
  - 다른 객체를 참조하는 것


- 의존성 주입
  - 스프링이 다른 프레임워크와 차별화되어 제공하는 의존관계 주입 기능
  - 객체를 직접 생성하는 게 아니라 외부에서 생성한 후 주입 시켜주는 방식
      - 여기서 외부란? IoC 컨테이너를 말한다.
      - IoC 컨테이너에서 객체 생성 후에 주입한다.
  - DI를 통해서 모듈 간의 결합도가 낮아지고 유연성이 높아진다.


- 의존성 주입 세가지 방법
  - 생성자 주입
      - 변수에 final을 붙일 수 있다
  - 필드 주입
      - 클래스 외부에서 접근이 불가능해 테스트하기가 어렵다
      - DI 프레임워크가 없으면 사용할 수 없다

      ```java
      @Autowired
      private Userservice userservice;
      ```
  - setter주입
      - 변경 가능성이 있는 의존관계에 사용된다.


- 생성자 주입 방식을 이용하는게 가장 좋다!
  - 의존관계는 애플리케이션 종료까지 변할 일이 없는 경우가 많다.
  - 객체 생성할 때 한 번 생성자를 호출해 의존관계를 정의해 불변으로 설계할 수 있다.



<br />

___

## 💭 느낀 점 / 회고

- 오랜만에 다시 복습하니까 예전보다 알게된 점이 더 많아진거 같다.
- 지금까지 필드주입을 해와서 테스트 코드를 작성하지 못 했던 것 같다.